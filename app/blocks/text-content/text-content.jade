include ../filter/filter

mixin text-content(data)

	//- variables
	- var filters = ["Сначала", "лучшие", "последние"];

	+b('article').text-content--detailed-view&attributes(attributes)

		each item in data
			+e('div').secondary-content
				if item.contentType === 'question' && !item.hasFollowers
					+e.subscribe(href='#') Подписаться

				if item.contentType === 'question' && item.hasFollowers
					+e('span').subscribers-counter !{item.subscrCounter}

				if item.contentType === 'answer'
					+e('span').subscribers-counter !{item.subscrCounter}

				+e('time').pub-date(datetime=item.pubDate4Machines) !{item.pubDate4Humans}

				if item.rubric
					+e('span').rubric !{item.rubric}

			case item.contentType
				when 'question'
					+e('div').main-content
						+e('header').question-header
							+e('h1').question-heading !{item.shortQuestion}

						if item.hasAnswers
							+e('div').answers-info
								+e('span').answers-counter !{item.answersCount}
								+e('span').respondents-list !{item.respondentsList}
							+e('div').extended-question !{item.extQuestion}

							+filter(filters)(class='--answers')

						else
							+e('div').answers-info--empty Нет ответов
							+e('a').reply(href='#') Ответить

				when 'answer'
					+e('div').main-content
						+e('div').answer !{item.answer}
